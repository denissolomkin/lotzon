order allow,deny
allow from all
deny from 31.131.18.3

RewriteEngine On

RewriteCond %{REQUEST_FILENAME} -f
RewriteRule ^(.*)$ $1 [QSA,L]

# temporary for json files
RewriteCond "%{REQUEST_URI}" !^(.*)(list)(.*)$
RewriteRule ^(.*)/([0-9]+)$ $1-list/$2 [L]

RewriteCond "%{REQUEST_URI}" !^(.*)(list)(.*)$
RewriteRule ^(.*)/([0-9]+)/(.*)$ $1-item/$3 [L]

RewriteCond "%{REQUEST_URI}" !^(.*)(list)(.*)$
RewriteRule ^(.*)/([0-9]+)/(.*)/([0-9]+)$ $1/view/$3-list/$4 [L]

# if json file exists and ajax request
RewriteCond %{HTTP:X-Requested-With} =XMLHttpRequest
RewriteCond %{HTTP:X-REQUESTED-WITH} ^(XMLHttpRequest)$
RewriteCond %{DOCUMENT_ROOT}/res/%{REQUEST_METHOD}/$1 -f
RewriteRule ^(.*)$ res/%{REQUEST_METHOD}/$1 [QSA,L]

RewriteCond %{REQUEST_FILENAME} !-f
RewriteRule ^(.*)$ index.php [QSA,L]
