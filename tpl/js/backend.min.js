function round(t,a){return a=a||0,parseFloat(t.toFixed(a))}function is_numeric(t){var a=" \n\r	\f            ​\u2028\u2029　";return("number"==typeof t||"string"==typeof t&&-1===a.indexOf(t.slice(-1)))&&""!==t&&!isNaN(t)}function registerPlayer(t,a,e,n){$.ajax({url:"/players/register/",method:"POST",data:t,async:!0,dataType:"json",success:function(n){1==n.status?a.call(t,n):e.call(t,n)},error:function(){n.call(t,data)}})}function loginPlayer(t,a,e,n){$.ajax({url:"/players/login/",method:"POST",data:t,async:!0,dataType:"json",success:function(n){1==n.status?a.call(t,n):e.call(t,n)},error:function(){n.call(t,data)}})}function updatePlayerProfile(t,a,e,n){$.ajax({url:"/players/update/",method:"POST",data:t,async:!0,dataType:"json",success:function(n){1==n.status?a.call(t,n):e.call(t,n)},error:function(){n.call(t,data)}})}function addTicket(t,a,e,n,s){$.ajax({url:"/game/ticket/",method:"POST",data:{tnum:t,combination:a},async:!0,dataType:"json",success:function(t){1==t.status?e.call(a,t):n.call(a,t)},error:function(){s.call(a,data)}})}function changeLanguage(t,a,e,n){$.ajax({url:"/language/"+t,method:"POST",async:!0,dataType:"json",success:function(t){1==t.status?a.call(this,t):e.call(this,t)},error:function(){n.call(this,data)}})}function loadLotteries(t,a,e,n,s){a||(a=0),$.ajax({url:"/content/lotteries?offset="+t+"&onlyMine="+(a?1:0),method:"GET",async:!0,dataType:"json",success:function(t){1==t.status?e.call($(this),t):n.call($(this),t)},error:function(){s.call($(this),data)}})}function loadShop(t,a,e,n,s){$.ajax({url:"/content/shop?category="+t+"&offset="+a,method:"GET",async:!0,dataType:"json",success:function(t){1==t.status?e.call($(this),t):n.call($(this),t)},error:function(){s.call($(this),data)}})}function getLotteryData(t,a,e){$.ajax({url:"/lastLottery?"+$.now(),method:"GET",async:!0,dataType:"json",success:function(e){e.i?t.call($(this),e):a.call($(this))},error:function(){e.call($(this))}})}function loadNews(t,a,e,n){$.ajax({url:"/content/news?offset="+t,method:"GET",async:!0,dataType:"json",success:function(t){1==t.status?a.call($(this),t):e.call($(this),t)},error:function(){n.call($(this),data)}})}function loadReviews(t,a,e,n){$.ajax({url:"/content/reviews?offset="+t,method:"GET",async:!0,dataType:"json",success:function(t){1==t.status?a.call($(this),t):e.call($(this),t)},error:function(){n.call($(this),data)}})}function appendReviews(t){$(".rv-items .h-ch").append(getTpl.comments.comment(t))}function createItemOrder(t,a,e,n){$.ajax({url:"/order/item/",method:"POST",data:t,async:!0,dataType:"json",success:function(n){1==n.status?(a.call(t,n),$("#shop-items-popup").removeClass("chance").find(".cs").show()):e.call(t,n)},error:function(){n.call(t,data)}})}function loadLotteryDetails(t,a,e,n,s){$("#profile-history").fadeIn(200).find(".yr-tb").html("").prev().show().parents("section").nextAll().hide();var c="/content/lottery/"+t;"next"==a?c="/content/lottery/next/"+t:"prev"==a?c="/content/lottery/prev/"+t:"current"==a&&$("#profile-history").find(".ws-dt").text($('.aw-bt[data-lotid="'+t+'"]').prevAll(".dt").text()),$.ajax({url:c,method:"GET",async:!0,dataType:"json",success:function(t){1==t.status?e.call($(this),t):n.call($(this),t)},error:function(){s.call($(this),data)}})}function removePlayerAvatar(t,a,e){$.ajax({url:"/players/updateAvatar",method:"DELETE",async:!0,dataType:"json",success:function(e){1==e.status?t.call($(this),e):a.call($(this),e)},error:function(){e.call($(this),data)}})}function addEmailInvite(t,a,e,n){$.ajax({url:"/invites/email",method:"POST",data:{email:t},async:!0,dataType:"json",success:function(t){1==t.status?a.call($(this),t):e.call($(this),t)},error:function(){n.call($(this),data)}})}function startQuickGame(t,a,e,n,s){$("#"+t+"-holder").show().find(".qg-msg").css("height","").show().find(".txt, .bt").hide().parent().find(".preloader").show(),$.ajax({url:"/quickgame/build/"+t+(a?"?id="+a:""),method:"GET",async:!0,dataType:"json",success:function(a){1==a.status?e.call($(this),a):($("#"+t+"-holder").show().find(".qg-msg").hide().parent().find(".preloader").hide(),n.call($(this),a))},error:function(){s.call($(this))}})}function playQuickGame(t,a,e,n){var s={cell:a};$.ajax({url:"/quickgame/play/"+t,method:"POST",data:s,async:!0,dataType:"json",success:function(t){1==t.status?e.call($(this),t):n.call($(this),t)},error:function(t){console.log(t.responseText)}})}function startChanceGame(t,a,e,n){$.ajax({url:"/chance/build/"+t,method:"GET",async:!0,dataType:"json",success:function(t){1==t.status?a.call($(this),t):e.call($(this),t)},error:function(){n.call($(this),data)}})}function playChanceGame(t,a,e,n,s){var c={choose:a};$.ajax({url:"/chance/play/"+t,method:"POST",data:c,async:!0,dataType:"json",success:function(t){1==t.status?e.call($(this),t):n.call($(this),t)},error:function(){s.call($(this),c)}})}function getLandingStats(t,a,e){$.ajax({url:"/stats/promo",method:"GET",async:!0,dataType:"json",success:function(e){1==e.status?t.call($(this),e):a.call($(this),e)},error:function(){e.call($(this),data)}})}function resendPassword(t,a,e,n){$.ajax({url:"/players/resendPassword",method:"POST",data:{email:t},async:!0,dataType:"json",success:function(t){1==t.status?a.call($(this),t):e.call($(this),t)},error:function(){n.call($(this),data)}})}function getTransactions(t,a,e,n,s){$.ajax({url:"/content/transactions/"+a+"/",method:"GET",data:{offset:t},async:!0,dataType:"json",success:function(t){1==t.status?e.call($(this),t):n.call($(this),t)},error:function(){s.call($(this),data)}})}function getNotices(t,a,e,n){$.ajax({url:"/content/notices/",method:"GET",data:{offset:t},async:!0,dataType:"json",success:function(t){1==t.status?a.call($(this),t):e.call($(this),t)},error:function(){n.call($(this),data)}})}function socialRefPost(t){$.ajax({url:"/players/social/"+t,method:"POST",data:{},async:!0,dataType:"json",success:function(t){1==t.status?successFunction.call($(this),t):failFunction.call($(this),t)},error:function(){errorFunction.call($(this),data)}})}function socialSuccessPost(t,a,e){$.ajax({url:"/players/social/vkontakte",method:"POST",data:{},async:!0,dataType:"json",success:function(e){1==e.status?t.call($(this),e):a.call($(this),e)},error:function(){e.call($(this),data)}})}function uploadVkPhoto(t,a,e,n){$.ajax({url:"/vkproxy/",method:"POST",data:{uurl:t},async:!0,dataType:"json",success:function(t){1==t.status?a.call($(this),t.res):e.call($(this),t)},error:function(){n.call($(this),data)}})}function requestForMoney(t,a,e,n){$.ajax({url:"/order/money",method:"POST",data:{data:t},async:!0,dataType:"json",success:function(t){1==t.status?a.call($(this),t):e.call($(this),t)},error:function(){n.call($(this),t)}})}function sendPartnersFeedback(t,a,e,n){$.ajax({url:"/feedback/",method:"POST",data:{email:t.email,text:t.text},async:!0,dataType:"json",success:function(t){1==t.status?a.call($(this),t):e.call($(this),t)},error:function(){n.call($(this),data)}})}function showQuickGameStart(){$(".notifications #qgame .badge-block .txt div").first().hide().next().fadeIn(200).parents(".badge-block").find(".cs").hide()}function startMoment(){$("#mchance").find("li").off("click").on("click",function(){var t=$(this);playChanceGame("moment",$(this).data("num"),function(a){if("win"==a.res.status)t.html($("#mchance").data("pointsWin")),t.addClass("won"),window.setTimeout(function(){$("#mchance .mm-msg").addClass("win").show().find(".txt").text("Поздравляем, выигранные баллы зачислены на счет"),$(".pz-ifo-bk").hide()},1e3);else if("error"==a.res.status)$(".pz-ifo-bk").hide(),$("#mchance .mm-msg").show().find(".txt").text(a.res.error);else{t.addClass("los");for(var e in a.res.field)if(1==a.res.field[e]){var n=parseInt(e)+1;$('li[data-num="'+n+'"]').addClass("blink")}$("li.blink").html($("#mchance").data("pointsWin"));var s=3,c=window.setInterval(function(){return 0==s?(window.clearInterval(c),$(".pz-ifo-bk").hide(),void $("#mchance .mm-msg").show().find(".txt").text("В этот раз не повезло")):(s--,void $("li.blink").toggleClass("true"))},600)}},function(t){$("#mchance .mm-msg").show().find(".txt").text(t.message)})})}document.write=function(t){$(document.body).append(t)},String.prototype.format=function(){for(var t=this,a=0;a<arguments.length;a++){var e=new RegExp("\\{"+a+"\\}","gi");t=t.replace(e,arguments[a])}return t},$.fn.extend({hasClasses:function(t){for(var a=new RegExp("( "+t.replace(/ +/g,"").replace(/,/g," | ")+" )"),e=/[\n\t\r]/g,n=0,s=this.length;s>n;n++)if(1===this[n].nodeType&&a.test((" "+this[n].className+" ").replace(e," ")))return!0;return!1}}),window.setInterval(function(){$.ajax({url:"/players/ping?ws="+ws+"&online="+(online?$.now():""),method:"GET",async:!0,dataType:"json",success:function(data){if(data.res){if(1==data.res.moment){var gw=$(".ngm-bk .rls-r-ts:visible").length||$("#ChanceGame-holder:visible").length||$("#QuickGame-holder:visible").length||$(".ngm-gm:visible").length||$("#game-won:visible").length||$("#game-won:visible").length||$("#game-end:visible").length||$("#game-process:visible").length||$("#game-itself:visible").length;gw||startQuickGame("Moment",null,buildQuickGame,function(t){$("#report-popup").show().find(".txt").text(getText(t.message))},function(){alert("error")})}(QuickGame=data.res.qgame)&&($(".notifications .badge#soon:visible").length||QuickGame.important)&&(badge=$(".notifications .badge#qgame"),badge.fadeIn(1200),data.res.qgame.timer>0?($("#timer_soon").countdown({until:QuickGame.timer,layout:"{mnn}:{snn}",onExpiry:showQuickGameStart}),$("#timer_soon").countdown("resume"),$("#timer_soon").countdown("option",{until:QuickGame.timer})):showQuickGameStart()),data.res.notice&&($(".notifications .badge#notice").length?$(".notifications .badge#notice").fadeIn(600).find(".title").text(data.res.notice.title).next().html(data.res.notice.txt):(badge=$(".notifications .badge").first().clone(),badge.attr("id",data.res.notice.name).fadeIn(1200).find(".title").text(data.res.notice.title).next().html(data.res.notice.txt),$(".notifications").append(badge)),$("section.profile .p-cnt li[data-link='profile-info']").click(),updateNotices(data.res.notice.unread)),data.res.callback&&eval(data.res.callback)}},error:function(){}})},6e4);